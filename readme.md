InfraInventory Suite - å®Œæ•´å°ˆæ¡ˆæ–‡æª”ç‰ˆæœ¬: V5.3 (Inventory) / V1.0 (Gateway)æŠ€è¡“æ£§: PHP (Native), MySQL, React (CDN), TailwindCSS1. å°ˆæ¡ˆæ¦‚è¿° (Overview)æœ¬å°ˆæ¡ˆæ˜¯ä¸€å€‹ç”±å…©å€‹ç¨ç«‹ç³»çµ±çµ„æˆçš„ IT è³‡ç”¢ç®¡ç†è§£æ±ºæ–¹æ¡ˆï¼Œæ—¨åœ¨è§£æ±ºåŸºç¤è¨­æ–½åœ˜éšŠçš„è³‡ç”¢è¿½è¹¤èˆ‡è‡ªå‹•åŒ–é€šçŸ¥éœ€æ±‚ã€‚ç³»çµ± A: InfraInventory (è³‡ç”¢ç®¡ç†ç«¯)ç”¨é€”: çµ¦ IT ç®¡ç†å“¡ä½¿ç”¨çš„å„€è¡¨æ¿ã€‚åŠŸèƒ½:è³‡ç”¢ CRUD (æ–°å¢/ä¿®æ”¹/åˆªé™¤/æŸ¥è©¢)ã€‚ä¸»æ•¸æ“šç®¡ç† (å“ç‰Œ/å‹è™Ÿ)ã€‚EOS (End-of-Support) é¢¨éšªè‡ªå‹•è¨ˆç®—èˆ‡ç´…ç¶ ç‡ˆè­¦ç¤ºã€‚Audit Logs (ç¨½æ ¸è»Œè·¡)ã€‚Excel/CSV åŒ¯å…¥èˆ‡åŒ¯å‡ºã€‚å¾®æœå‹™æ•´åˆ: é€é API Key å‘¼å« Gateway ç™¼é€é€šçŸ¥ã€‚ç³»çµ± B: InfraGateway (é€šçŸ¥å¾®æœå‹™)ç”¨é€”: ç¨ç«‹çš„éƒµä»¶ç™¼é€å¾®æœå‹™ (Microservice)ã€‚åŠŸèƒ½:é›†ä¸­ç®¡ç† SMTP è¨­å®š (Gmail/Outlook)ã€‚æä¾› RESTful API (POST /api/send.php) ä¾›å¤–éƒ¨ç³»çµ±èª¿ç”¨ã€‚API Key å®‰å…¨é©—è­‰èˆ‡ç™¼é€ç´€éŒ„ (Traffic Logs)ã€‚2. æª”æ¡ˆçµæ§‹ (File Structure)è«‹ç¢ºä¿æ‚¨çš„ä¼ºæœå™¨ (Laragon) ç›®éŒ„çµæ§‹å¦‚ä¸‹ï¼šğŸ“‚ C:\laragon\www\infra-inventory\ (Client)æª”æ¡ˆç”¨é€”index.htmlå‰ç«¯å–®é æ‡‰ç”¨ (V5.3 å®Œæ•´ç‰ˆ)api/config.phpè³‡æ–™åº«é€£ç·šè¨­å®šapi/inventory.phpè³‡ç”¢ CRUD é‚è¼¯api/settings.phpè¨­å®šèˆ‡ä¸»æ•¸æ“šç®¡ç†api/users.phpä½¿ç”¨è€…å¸³è™Ÿç®¡ç†api/logs.phpè®€å–ç¨½æ ¸æ—¥èªŒapi/import.phpCSV åŒ¯å…¥è™•ç†api/backup.phpè³‡æ–™åº«åŠ å¯†å‚™ä»½api/restore.phpè³‡æ–™åº«é‚„åŸapi/cron_eos_report.phpè‡ªå‹•åŒ–è…³æœ¬: æª¢æŸ¥ EOS ä¸¦å‘¼å« Gatewayapi/logger.phpæ—¥èªŒå¯«å…¥è¼”åŠ©å‡½å¼api/options.phpä¸‹æ‹‰é¸å–®è³‡æ–™ä¾†æºapi/setup_database.phpè³‡æ–™åº«åˆå§‹åŒ–å®‰è£æª”ğŸ“‚ C:\laragon\www\infra-gateway\ (Service)æª”æ¡ˆç”¨é€”index.htmlGateway ç®¡ç†å¾Œå°api/send.phpå…¬é–‹ API ç«¯é»: æ¥æ”¶ç™¼ä¿¡è«‹æ±‚api/admin.phpå¾Œå°ç®¡ç† APIapi/Mailer.phpSMTP æ ¸å¿ƒé¡åˆ¥api/setup.phpè³‡æ–™åº«åˆå§‹åŒ–å®‰è£æª”3. å®‰è£èˆ‡éƒ¨ç½² (Deployment)ç’°å¢ƒéœ€æ±‚Web Server: Apache æˆ– NginxPHP: 8.0+ (éœ€é–‹å•Ÿ extension=openssl, extension=pdo_mysql)Database: MySQL 8.0 / MariaDBå®‰è£æ­¥é©Ÿåˆå§‹åŒ– Gateway:ç€è¦½å™¨è¨ªå•: http://localhost/infra-gateway/api/setup.phpç™»å…¥å¾Œå° (admin / secret123) ä¸¦è¨­å®š SMTPã€‚å»ºç«‹ä¸€å€‹æ–°çš„ Client Appï¼Œè¤‡è£½ API Keyã€‚åˆå§‹åŒ– Inventory:ç€è¦½å™¨è¨ªå•: http://localhost/infra-inventory/api/setup_database.phpç™»å…¥ç³»çµ± (admin / password123)ã€‚é€²å…¥ Settings > Microservicesã€‚å¡«å…¥ Gateway URL (http://localhost/infra-gateway/api/send.php) èˆ‡å‰›æ‰è¤‡è£½çš„ API Keyã€‚4. é–‹ç™¼è€…æŒ‡å— (Developer Guide)å¦‚ä½•æ¸¬è©¦ Email APIæ‚¨å¯ä»¥ä½¿ç”¨ cURL æ¸¬è©¦ Gateway æ˜¯å¦é‹ä½œæ­£å¸¸ï¼šcurl -X POST http://localhost/infra-gateway/api/send.php \
  -H "Authorization: Bearer <YOUR_API_KEY>" \
  -H "Content-Type: application/json" \
  -d '{
    "to": "admin@example.com",
    "subject": "Test from CLI",
    "body": "<h1>It Works!</h1>"
  }'
è¨­å®šè‡ªå‹•æ’ç¨‹ (Cron Job)è‹¥è¦æ¯æ—¥è‡ªå‹•ç™¼é€ EOS å ±å‘Šï¼Œè«‹åœ¨ Windows Task Scheduler æ–°å¢ä»»å‹™ï¼šç¨‹å¼/è…³æœ¬: C:\laragon\bin\php\php-8.x\php.exeå¼•æ•¸: -f C:\laragon\www\infra-inventory\api\cron_eos_report.phpé »ç‡: æ¯å¤©ä¸Šåˆ 9:005. å¸¸è¦‹å•é¡Œ (Troubleshooting)Restore å¤±æ•— "No active transaction": è«‹ç¢ºä¿ä½¿ç”¨ V2.6+ ç‰ˆæœ¬çš„ restore.phpï¼Œæˆ‘å€‘å·²å°‡ TRUNCATE æ”¹ç‚º DELETE FROM ä»¥æ”¯æ´äº¤æ˜“å›æ»¾ã€‚Email ç™¼é€å¤±æ•—: è«‹æª¢æŸ¥ Gateway çš„ Traffic Logsã€‚è‹¥ç‹€æ…‹ç‚º errorï¼Œé€šå¸¸æ˜¯ SMTP å¸³å¯†éŒ¯èª¤æˆ–æ˜¯ Google 2FA æœªä½¿ç”¨ã€Œæ‡‰ç”¨ç¨‹å¼å¯†ç¢¼ã€ã€‚